{"remainingRequest":"/var/www/Educational/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/Educational/src/components/HomeView/FeedbackComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/Educational/src/components/HomeView/FeedbackComponent.vue","mtime":1610881693526},{"path":"/var/www/Educational/node_modules/cache-loader/dist/cjs.js","mtime":1610683474386},{"path":"/var/www/Educational/node_modules/babel-loader/lib/index.js","mtime":1610683474074},{"path":"/var/www/Educational/node_modules/cache-loader/dist/cjs.js","mtime":1610683474386},{"path":"/var/www/Educational/node_modules/vue-loader/lib/index.js","mtime":1610683475702}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFZ1ZUF4aW9zIGZyb20gInZ1ZS1heGlvcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgppbXBvcnQgewogICAgdmFsaWRhdGlvbk1peGluCn0gZnJvbSAidnVlbGlkYXRlIjsKaW1wb3J0IHsKICAgIHJlcXVpcmVkLAogICAgZW1haWwsCiAgICBtYXhMZW5ndGgKfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwoKVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpOwpleHBvcnQgZGVmYXVsdCB7CiAgICBtaXhpbnM6IFt2YWxpZGF0aW9uTWl4aW5dLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBuYW1lOiBudWxsLAogICAgICAgICAgICBlbWFpbDogbnVsbCwKICAgICAgICAgICAgdGV4dDogbnVsbCwKICAgICAgICAgICAgaXNTaG93OiB0cnVlLAogICAgICAgICAgICBlcnJvcjogZmFsc2UsCiAgICAgICAgfTsKICAgIH0sCgogICAgdmFsaWRhdGlvbnM6IHsKICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgIH0sCiAgICAgICAgZW1haWw6IHsKICAgICAgICAgICAgZW1haWwsCiAgICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgIH0sCiAgICAgICAgdGV4dDogewogICAgICAgICAgICByZXF1aXJlZCwKICAgICAgICAgICAgbWF4TGVuZ3RoOiBtYXhMZW5ndGgoMTAyNCksCiAgICAgICAgfSwKICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIHZhbGlkYXRlU3RhdGVOYW1lKCkgewogICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgICAkZGlydHksCiAgICAgICAgICAgICAgICAkZXJyb3IKICAgICAgICAgICAgfSA9IHRoaXMuJHYubmFtZTsKICAgICAgICAgICAgcmV0dXJuICRkaXJ0eSA/ICEkZXJyb3IgOiBudWxsOwogICAgICAgIH0sCgogICAgICAgIHZhbGlkYXRlU3RhdGVFbWFpbCgpIHsKICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgICAgJGRpcnR5LAogICAgICAgICAgICAgICAgJGVycm9yCiAgICAgICAgICAgIH0gPSB0aGlzLiR2LmVtYWlsOwogICAgICAgICAgICByZXR1cm4gJGRpcnR5ID8gISRlcnJvciA6IG51bGw7CiAgICAgICAgfSwKCiAgICAgICAgdmFsaWRhdGVTdGF0ZVRleHQoKSB7CiAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICAgICRkaXJ0eSwKICAgICAgICAgICAgICAgICRlcnJvcgogICAgICAgICAgICB9ID0gdGhpcy4kdi50ZXh0OwogICAgICAgICAgICByZXR1cm4gJGRpcnR5ID8gISRlcnJvciA6IG51bGw7CiAgICAgICAgfSwKCiAgICAgICAgc2VuZE1lc3MoKSB7CiAgICAgICAgICAgIHRoaXMuJHYuJHRvdWNoKCk7CiAgICAgICAgICAgIGlmICh0aGlzLiR2LiRhbnlFcnJvcikgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvZW1haWwvc2VuZCIsIHsKICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHQsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2UuSlNPTjoiLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLnJlcykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyLnJlcXVlc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9LAp9Owo="},{"version":3,"sources":["FeedbackComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FeedbackComponent.vue","sourceRoot":"src/components/HomeView","sourcesContent":["<template>\n<b-container class=\"align-self-center text-center mb-5\">\n    <b-row class=\"justify-content-center pb-3\">\n        <b-col md=\"6\" cols=\"12\">\n            <h1>Ещё остались вопросы?</h1>\n        </b-col>\n    </b-row>\n    <template v-if=\"isShow\">\n        <b-row class=\"justify-content-center\">\n            <b-col md=\"6\" cols=\"12\">\n                <p>\n                    Оставьте свои контактные данные, для того, чтобы мы смогли с Вами\n                    связаться\n                </p>\n            </b-col>\n        </b-row>\n        <b-row class=\"justify-content-center pb-4\">\n            <b-col cols=\"12\" md=\"6\">\n                <div>\n                    <b-form @submit.prevent=\"sendMess()\">\n                        <b-form-group>\n                            <b-form-input type=\"text\" placeholder=\"Ваше имя...\" aria-describedby=\"input-feedback-name\" v-model.trim=\"$v.name.$model\" :state=\"validateStateName('name')\">\n                            </b-form-input>\n                            <b-form-invalid-feedback class=\"text-left\" id=\"input-feedback-name\">\n                                Это поле является обязательным\n                            </b-form-invalid-feedback>\n                        </b-form-group>\n                        <b-form-group>\n                            <b-form-input placeholder=\"Ваш email...\" aria-describedby=\"input-feedback-email\" type=\"email\" v-model.trim=\"$v.email.$model\" :state=\"validateStateEmail('email')\"></b-form-input>\n                            <b-form-invalid-feedback class=\"text-left\" id=\"input-feedback-email\">\n                                Это поле должно быть email и обязательным\n                            </b-form-invalid-feedback>\n                        </b-form-group>\n                        <b-form-textarea placeholder=\"Ваши вопросы...\" aria-describedby=\"input-feedback-text\" rows=\"6\" no-resize v-model.trim=\"$v.text.$model\" :state=\"validateStateText('text')\"></b-form-textarea>\n                        <b-form-invalid-feedback class=\"text-left\" id=\"input-feedback-text\">\n                            Это поле является обязательным и быть не более 1024 символов\n                        </b-form-invalid-feedback>\n                        <div class=\"mt-3\">\n                            <b-button type=\"submit\" block variant=\"secondary\" @click.prevent=\"sendMess\" :disabled=\"$v.$anyError\">Отправить</b-button>\n                        </div>\n                    </b-form>\n                </div>\n            </b-col>\n        </b-row>\n    </template>\n    <template v-else-if=\"error\">\n        <b-alert show variant=\"danger\">\n            <h4 class=\"alert-heading\">Ошибка!</h4>\n            <p>Внимание! Возникла ошибка, вернитесь на сайт чуть позже!</p>\n        </b-alert>\n    </template>\n    <template v-else>\n        <b-alert show variant=\"success\">\n            <h4 class=\"alert-heading\">Спасибо за сообщение!</h4>\n            <p>Мы постараемся связаться с Вами в ближайшее время!</p>\n        </b-alert>\n    </template>\n</b-container>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport VueAxios from \"vue-axios\";\nimport axios from \"axios\";\n\nimport {\n    validationMixin\n} from \"vuelidate\";\nimport {\n    required,\n    email,\n    maxLength\n} from \"vuelidate/lib/validators\";\n\nVue.use(VueAxios, axios);\nexport default {\n    mixins: [validationMixin],\n    data() {\n        return {\n            name: null,\n            email: null,\n            text: null,\n            isShow: true,\n            error: false,\n        };\n    },\n\n    validations: {\n        name: {\n            required,\n        },\n        email: {\n            email,\n            required,\n        },\n        text: {\n            required,\n            maxLength: maxLength(1024),\n        },\n    },\n\n    methods: {\n        validateStateName() {\n            const {\n                $dirty,\n                $error\n            } = this.$v.name;\n            return $dirty ? !$error : null;\n        },\n\n        validateStateEmail() {\n            const {\n                $dirty,\n                $error\n            } = this.$v.email;\n            return $dirty ? !$error : null;\n        },\n\n        validateStateText() {\n            const {\n                $dirty,\n                $error\n            } = this.$v.text;\n            return $dirty ? !$error : null;\n        },\n\n        sendMess() {\n            this.$v.$touch();\n            if (this.$v.$anyError) {\n                return;\n            }\n\n            axios\n                .post(\"http://localhost:3000/api/email/send\", {\n                    email: this.email,\n                    text: this.text,\n                    name: this.name,\n                })\n                .then((res) => {\n                    console.log(\"response.JSON:\", res.data);\n\n                    this.isShow = false;\n                })\n                .catch((err) => {\n                    if (err.res) {\n                        this.$v.$touch();\n                    } else if (err.request) {\n                        this.isShow = false;\n                        this.error = true;\n                        console.log(\"error\");\n                    }\n                });\n        },\n    },\n};\n</script>\n"]}]}